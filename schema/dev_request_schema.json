{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Dev Request Schema - Extended",
  "description": "Schema for the minimal JSON input to request C# class generation and validation mapping.",
  "type": "object",
  "required": ["action","className","properties"],
  "properties": {
    "action": {
      "type": "string",
      "description": "Intent of the request (e.g. createClass)",
      "examples": ["createClass"]
    },
    "solution": {"type": "string"},
    "project": {"type": "string"},
    "folder": {"type": "string", "description": "Target folder within the project (e.g. Models)"},
    "className": {"type": "string", "minLength": 1},
    "namespace": {"type": "string"},
    "classDescription": {"type": "string"},
    "options": {
      "type": "object",
      "properties": {
        "useNullableReferenceTypes": {"type": "boolean"},
        "serializer": {"type": "string","enum":["System.Text.Json","Newtonsoft.Json"]},
        "generateValidationAttributes": {"type": "boolean"},
        "classStyle": {"type": "string","enum":["class","record"]},
        "accessibility": {"type":"string","enum":["public","internal"]}
      },
      "additionalProperties": false
    },
    "properties": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["name","type"],
        "properties": {
          "name": {"type":"string"},
          "type": {"type":"string","description":"Logical type name (e.g. string,int,decimal,datetime,object,enum)"},
          "description": {"type":"string"},
          "required": {"type":"boolean"},
          "collectionType": {"type":"string","enum":["List","Array","HashSet"]},
          "example": {},
          "enumValues": {"type":"array","items":{"type":["string","number"]}},
          "nestedClass": {
            "type": "object",
            "required": ["className","properties"],
            "properties": {
              "className": {"type":"string"},
              "description": {"type":"string"},
              "properties": {"type":"array"}
            },
            "additionalProperties": true
          },
          "validations": {
            "type": "object",
            "properties": {
              "required": {"type":"boolean"},
              "unique": {"type":"boolean"},
              "minLength": {"type":"integer","minimum":0},
              "maxLength": {"type":"integer","minimum":0},
              "min": {"type":"number"},
              "max": {"type":"number"},
              "exclusiveMin": {"type":"boolean"},
              "exclusiveMax": {"type":"boolean"},
              "pattern": {"type":"string"},
              "format": {"type":"string","enum":["email","uri","uuid","date-time","date","time"]},
              "minItems": {"type":"integer","minimum":0},
              "maxItems": {"type":"integer","minimum":0},
              "itemValidations": {"type":"object"},
              "enum": {"type":"array","items":{"type":["string","number"]}},
              "customValidator": {"type":"string"},
              "errorMessage": {}
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "action": "createClass",
      "project": "OscarModel",
      "folder": "Models",
      "className": "Product",
      "classDescription": "Represents a product in inventory",
      "properties": [
        {"name":"Id","type":"Guid","required":true},
        {"name":"Sku","type":"string","required":true,"validations":{"maxLength":50,"pattern":"^[A-Z0-9-]+$","unique":true}},
        {"name":"Name","type":"string","required":true,"validations":{"maxLength":200}},
        {"name":"Price","type":"decimal","required":true,"validations":{"min":0}}
      ],
      "options": {"classStyle":"class","serializer":"System.Text.Json"}
    }
  ]
}
