CONVENTIONS
===========

Purpose
-------
This document records the defaults and conventions the assistant will apply when generating C# code, validation, and repository changes from the logical JSON descriptions you provide.

High-level goals
-----------------
- Be predictable: use industry-standard C# conventions.
- Keep generated code safe: enable nullable reference types, add validation stubs and attributes where helpful.
- Be explicit: prefer explicit C# types rather than guessing from example values.

Repository structure and targets
------------------------------
- Project mapping: `project` + `folder` from input map to the file path where generated files are placed. Example: `project: OscarModel`, `folder: Models` -> `OscarModel_Lib/Models`.
- File names: Type `Customer` -> file `Customer.cs`.

Naming and style
----------------
- C# types and public members: PascalCase (e.g., `Product`, `ProductId`).
- Private members: _camelCase or _underscore-prefixed for backing fields.
- JSON properties: lowerCamelCase in JSON via `[JsonPropertyName("...")]` by default.
- XML documentation: add `<summary>` doc comments from `description` fields.

Nullability
-----------
- Nullable reference types are enabled by default. Omitted `required` means optional -> nullable reference (`string?`) or nullable value type (`int?`).
- `required: true` will make the property non-nullable where appropriate.

Serialization
-------------
- Default serializer: `System.Text.Json` and attributes like `[JsonPropertyName("jsonName")]`.
- Override: set `options.serializer` to `Newtonsoft.Json` in the input if preferred.

Type mapping (logical -> C#)
----------------------------
- `string` -> `string` / `string?`
- `int` -> `int` / `int?`
- `long` -> `long` / `long?`
- `decimal` -> `decimal` / `decimal?`
- `double` -> `double` / `double?`
- `bool` -> `bool` / `bool?`
- `datetime`/`date-time` -> `DateTime` / `DateTime?`
- `date` -> `DateOnly` / `DateOnly?`
- `time` -> `TimeOnly` / `TimeOnly?`
- `guid`/`uuid` -> `Guid` / `Guid?`
- `object` -> nested class or `Dictionary<string, object>` when unspecified
- `array`/collection -> `List<T>` by default; override with `collectionType`.

Validation mapping
------------------
Validation hints map to DataAnnotations and to a generated `Validate()` method returning `IEnumerable<ValidationResult>`.

Common mappings:
- `required: true` -> `[Required]` + non-nullable property
- `minLength`/`maxLength` -> `[StringLength(max, MinimumLength = min)]`
- `min`/`max` -> `[Range(min, max)]` for numeric types
- `pattern` -> `[RegularExpression("...")]`
- `format: email` -> `[EmailAddress]`
- `enum` -> generated `enum` type
- `unique: true` -> generate TODO/stub; uniqueness is enforced at persistence layer

Collections
-----------
- Use `List<T>` for collections unless `collectionType` specifies otherwise.
- Validate collection sizes using `minItems`/`maxItems` and `itemValidations` for per-item rules.

Classes vs Records
------------------
- Default: `class` for domain models.
- Use `record` when `options.classStyle` is `record` or when immutability and value-based equality are explicitly requested.

Git workflow
------------
- Feature branches: `feat/<short-description>`.
- Commit messages: `feat(models): add Product class`.
- I will not push to remotes without your explicit approval. I will provide the `git push` command for you to run.

Delivery and review
-------------------
- For each requested change the assistant will:
  - create a feature branch locally
  - generate files and make commits
  - run `dotnet build` and `dotnet test` when applicable
  - provide the diff and test output for review

How to give input
------------------
- Provide a JSON object with `action: createClass`, `className`, and `properties` as described in the companion JSON Schema in `schema/dev_request_schema.json`.
- Keep descriptions non-technical; the assistant maps logical `type` names and validation hints to C#.

Overrides
---------
- Request adjustments to defaults (serializer, classStyle, naming) by adding `options` in the JSON input.

Generated by assistant on 2025-12-08
